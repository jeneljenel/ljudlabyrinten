<html lang=”en”>
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camera App</title>
    <!-- Link to your main style sheet-->
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>
    
    <!-- QR code scanner -->
    <script src="https://raw.githubusercontent.com/mebjas/html5-qrcode/master/minified/html5-qrcode.min.js"></script>
    <script src="https://rawgit.com/sitepoint-editors/jsqrcode/master/src/qr_packed.js"></script>
    <script src="qrCodeScanner.js"></script>

    <script src="main.js"></script>
</head>

<body>

    <div class="wrapper">
        <main x-data="state">

        
        <!-- CAMERA OPTION  / -->
        <section x-show="!story.loaded">
            <p>Skanna koden din jävel...</p>
            <button @click="showCamera">Camera Skanner </button>
            <audio id="myAudio" loop> <!-- @TODO add autoplay-->
                <source src="sound.wav" type="audio/wav">
            </audio>
        </section>

        <!-- Camera -->
        <div id="camera" x-show="user.showCamera">
            <!-- FLEX COLUMN -->
            <!-- Camera sensor -->
            <div id="reservedSpace">
                <canvas id="camera--sensor"></canvas>
                <!-- Camera view -->
                <video id="camera--view" autoplay playsinline></video>
            </div>
            <!-- Camera output -->
            <img src="//:0" alt="" id="camera--output" class="camOutput">

            <!-- Camera trigger -->
            <div id="btnWrp" onclick="showWindow()">
                <button id="camera--trigger" onclick="myFunction()">Take a picture</button>
            </div>
        </div>


        <!-- QR SCANNER USER MENU  / -->
        <section x-show="!story.loaded">
            <button @click="showQRScanner">QR Scanner första testet.... </button>
            <audio id="myAudio" loop> <!-- @TODO add autoplay-->
            <source src="sound.wav" type="audio/wav">
            </audio> 
        </section>

        <!-- QR Camera scanner -->
        <div x-show="user.showQRScanner"> <!-- @TODO -->
            <audio id="myAudio" loop> <!-- @TODO add autoplay-->
            <source src="sound.wav" type="audio/wav">
            </audio> 
            <h1>DU HAR KLICKAT PÅ QR Code Scanner</h1>
  
            <div id="qr-reader" style="width:500px"></div>
            <div id="qr-reader-results"></div>
        </div>

        
        <!-- SECOND SCANNER.... -->
        <div id="wrapper2">
            <h1>QR Code Scanner andra testet...</h1>
      
            <a id="btn-scan-qr">
              <img src="https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2017/07/1499401426qr_icon.svg">
            </a>
      
            <canvas hidden="" id="qr-canvas"></canvas>
      
            <div id="qr-result" hidden="">
              <b>Data:</b> <span id="outputData"></span>
            </div>
          </div>
      

        <!-- Showing story data / @TODO remove in prod. -->
        <section x-show="story.loaded && story.data">
            <h1 x-text="story.data.title"></h1>
        </section>

        <!-- When user has activated a new part of the story -->
        <div class="wrapper2">

            <section x-data="{ showBox: false }">

                <button @click="showBox = !showBox">Taken picture ( Och visa ljudFilen! )</button>

                <div x-show="showBox" class="audioWrapper">

                    <audio controls id="myAudio">
                        <source src="sound.wav" type="audio/wav">
                    </audio>

                    <button class="playpause" id="playPause" onclick="playAudio()">Play Audio</button>
                </div>

            </section>

        </div>

    </main>
    </div>
    
</body>
</html>